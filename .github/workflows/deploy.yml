name: ðŸš€ Deploy & Restart Pterodactyl Bot Server

on:
  push:
    branches: ["main"]  # ðŸŸ¢ Trigger on push to main branch
  workflow_dispatch: {}  # ðŸ”˜ Allow manual triggering of the workflow

jobs:
  deploy:
    runs-on: ubuntu-latest

    env:
      BOT_API_URL: ${{ secrets.BOT_API_URL }}   # ðŸ”’ Pterodactyl API endpoint (set in repo secrets)
      BOT_API_KEY: ${{ secrets.BOT_API_KEY }}   # ðŸ”’ Pterodactyl API key (set in repo secrets)

    steps:
    - name: ðŸ”„ Restart Bot Server via Pterodactyl API
      run: |
        # ðŸ“¨ Send restart signal to Pterodactyl server
        curl -X POST "${BOT_API_URL}" \
          -H "Authorization: Bearer ${BOT_API_KEY}" \
          -H "Content-Type: application/json" \
          --data '{"signal": "restart"}'